$(document).ready(function(){function e(){f=!0,y.addClass("ball-hover"),v.addClass("barrel-ready"),v.css("transform","rotate("+c+"deg)")}function a(){s=1,l=1,y.removeClass("ball-hover"),v.removeClass("barrel-ready"),v.css("transform","rotate("+c+"deg)")}function t(){if(f){var e=$("<div></div>");e.addClass("ball ball-bullet ball-"+k[w]),e.css("top","100%"),e.css("left","50%"),e.css("margin-left",100*n-32),e.css("margin-top",-64-100*d),C.append(e);var a=32,t=o+(r-a)/i;t>772?(t=772,a=r-(t-o)*i):t<32&&(t=32,a=r-(t-o)*i),setTimeout(function(){e.css("top",a-32),e.css("left",t-32),e.css("margin",0)},30),setTimeout(function(){e.remove()},3e3),f=!1,y.removeClass("ball-"+k[w]),k[w]=M[Math.floor(Math.random()*p)],w=(w+1)%g,y.addClass("ball-"+k[w])}}var o=402,r=474,s=1,l=1,n=0,d=1,c=0,i=d/n,f=!1,m=!1,u=!1,b=!1,h=!1,y=$("#control-ball"),C=$("#control-panel"),v=$("#control-barrel"),M=["red","green","blue","purple","yellow","gray"],p=M.length,g=6,k=new Array(g+1),w=0;for(w=0;w<g;++w)k[w]=M[Math.floor(Math.random()*p)];w=g,y.addClass("ball-"+k[w]),$(document).bind("keydown",function(a){32==a.keyCode&&(b=!0,h=!1),65==a.keyCode&&(m=!0,u=!1),68==a.keyCode&&(u=!0,m=!1),b&&e()}),$(document).bind("keyup",function(e){32==e.keyCode&&(b=!1,h=!0),65==e.keyCode&&(m=!1),68==e.keyCode&&(u=!1),h&&(t(),a())}),setInterval(function(){m?(c-=5,c<=-90&&(c=-90),n=Math.sin(c*Math.PI/180),d=Math.sqrt(1-Math.pow(n,2)),i=d/n,v.css("transform","rotate("+c+"deg)")):u&&(c+=5,c>=90&&(c=90),n=Math.sin(c*Math.PI/180),d=Math.sqrt(1-Math.pow(n,2)),i=d/n,v.css("transform","rotate("+c+"deg)"))},100)});